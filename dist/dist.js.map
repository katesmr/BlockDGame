{"version":3,"sources":["webpack:///webpack/bootstrap bb583757ab36b6f56f9d","webpack:///./src/core/Cell.js","webpack:///./src/BoardConsumer.js","webpack:///./src/Game.js","webpack:///./src/core/Board.js","webpack:///./src/core/commonEventNames.js","webpack:///./src/PhaserGame.js","webpack:///./config/config.js","webpack:///./src/core/Observer.js","webpack:///./src/index.js"],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,oBAAoB,MAAM;AAC1B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,MAAM;AACR;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AC/PA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,yCAAyC;AACvG;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA,6CAA6C;AAC7C,6CAA6C;AAC7C,sBAAsB,QAAQ;AAC9B;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA,8CAA8C,kDAAkD;AAChG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB,4BAA4B,QAAQ;AACpC,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,SAAS;AACT,gDAAgD;AAChD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;;;;;;;;AC9JA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2DAA2D,6CAA6C;AACxG;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mBAAmB;AACrC,yBAAyB;AACzB,iCAAiC,sDAAsD;AACvF;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB,WAAW;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC5GA;;AAEA;;AAEA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB;AACjB,uBAAuB;AACvB,8BAA8B,OAAO;AACrC,2BAA2B,MAAM;AACjC,aAAa;AACb;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClLA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACRA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACXA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;ACXA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA,qBAAqB,OAAO;AAC5B,sBAAsB,SAAS;AAC/B,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,OAAO;AAC5B,sBAAsB,SAAS;AAC/B,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,OAAO;AAC5B,oBAAoB,EAAE;AACtB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,qBAAqB,OAAO;AAC5B,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA,eAAe,YAAY;AAC3B,6BAA6B;AAC7B;AACA;;;;;;;;AC7GA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"./dist/dist.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bb583757ab36b6f56f9d","'use strict';\n\nmodule.exports = Cell;\n\n/**\n * \n */\nfunction Cell(){\n\t/**\n\t * Its value.\n\t *\n\t * @protected\n\t * @property _value\n\t * @type {Number}\n\t */\n\tthis._value = Cell.FREE_CELL_VALUE;\n\n\t/**\n\t * @protected\n\t * @property _price\n\t * @type {Number}\n\t */\n\tthis._price = Cell.PRICE_X1;\n\n\t/**\n\t * @protected\n\t * @property _type\n \t * @type {Number}\n\t */\n\tthis._type = Cell.TYPE_NORMAL;\n}\n\n/**\n * FREE_CELL_VALUE\n * @static\n * @type {Number}\n */\nCell.FREE_CELL_VALUE = -1;\n\n/**\n * PRICE_INCREASOR\n * @type {number}\n */\nCell.PRICE_INCREASOR = 1;\n\n/**\n * PRICE_DECREASOR\n * @type {number}\n */\nCell.PRICE_DECREASOR = 1;\n\n/**\n * @property PRICE_X1\n * @static\n * @type {Number}\n */\nCell.PRICE_X1 = 1;\n\n/**\n * @property PRICE_X2\n * @static\n * @type {Number}\n */\nCell.PRICE_X2 = 2;\n\n/**\n * @property PRICE_X3\n * @static\n * @type {Number}\n */\nCell.PRICE_X3 = 3;\n\n/**\n * @property PRICE_X4\n * @static\n * @type {Number}\n */\nCell.PRICE_X4 = 4;\n\n/**\n * @property PRICE_X5\n * @static\n * @type {Number}\n */\nCell.PRICE_X5 = 5;\n\n/**\n * @property TYPE_NORMAL\n * @static\n * @type {Number}\n */\nCell.TYPE_NORMAL = 1;\n\n/**\n * @property TYPE_EXTRA_BONUS\n * @static\n * @type {Number}\n */\nCell.TYPE_EXTRA_BONUS = 2;\n\n/**\n * @property TYPE_EXTRA_BAD\n * @static\n * @type {Number}\n */\nCell.TYPE_EXTRA_BAD = 3;\n\n/**\n * Compute total price of all cells by formula normalPrice * bonusPrice / badPrice\n * @param cellList {Array} Cell list\n * @returns {Number}\n */\nCell.computeScore = function(cellList){\n\tvar i, cell, result;\n\tvar normalCellPrice = 0;\n    var bonusCellPrice = 0;\n    var badCellPrice = 0;\n    var count = cellList.length;\n    for(i = 0; i < count; ++i){\n\t\tcell = cellList[i];\n\t\tif(cell.isType(Cell.TYPE_NORMAL) === true){\n\t\t\tnormalCellPrice += cell.getPrice();\n\t\t} else if(cell.isType(Cell.TYPE_EXTRA_BONUS) === true){\n\t\t\tbonusCellPrice += cell.getPrice();\n\t\t} else if(cell.isType(Cell.TYPE_EXTRA_BAD) === true){\n            badCellPrice += cell.getPrice();\n        }\n\t}\n\tif(bonusCellPrice === 0){\n\t\tbonusCellPrice = 1;\n\t}\n\tif(badCellPrice === 0){\n\t\tbadCellPrice = 1;\n\t}\n\tresult = normalCellPrice * bonusCellPrice / badCellPrice;\n\treturn Math.floor(result);\n};\n\n/**\n * @returns {Number}\n */\nCell.prototype.getValue = function(){\n\treturn this._value;\n};\n\n/**\n * @returns {Number}\n */\nCell.prototype.getPrice = function(){\n\treturn this._price;\n};\n\n/**\n * @param value {Number}\n */\nCell.prototype.setValue = function(value){\n\tthis._value = value;\n};\n\n/**\n * Increase price value\n */\nCell.prototype.increasePrice = function(priceIncreasor){\n\tif(priceIncreasor){\n\t\tthis._price += priceIncreasor;\n\t} else{ // if(this._price < Cell.PRICE_X5)\n\t\tthis._price += Cell.PRICE_INCREASOR;\n\t}\n};\n\n/**\n * Transforms the type to the new one.\n * @param {Number} typeEnum\n */\nCell.prototype.transform = function(typeEnum){\n\tswitch(typeEnum){\n\t\tcase Cell.TYPE_NORMAL:\n\t\t\tthis._type = Cell.TYPE_NORMAL;\n\t\t\tthis._price = Cell.PRICE_X1;\n\t\t\tbreak;\n\t\tcase Cell.TYPE_EXTRA_BONUS:\n\t\t\tthis._type = Cell.TYPE_EXTRA_BONUS;\n\t\t\tthis.increasePrice();\n\t\t\tbreak;\n\t\tcase Cell.TYPE_EXTRA_BAD:\n\t\t\tthis._type = Cell.TYPE_EXTRA_BAD;\n\t\t\tthis.increasePrice();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n};\n\n/**\n * Checks type with given value.\n * @param {Number} typeEnum\n * @return {Boolean}\n */\nCell.prototype.isType = function(typeEnum){\n\treturn this._type === typeEnum;\n};\n\n/**\n * Checks whether the current value is default (e.g. empty)\n * @return {Boolean}\n */\nCell.prototype.isFree = function(){\n\treturn this._value === Cell.FREE_CELL_VALUE;\n};\n\n/**\n * Resets all internal state/conditions/values to default\n */\nCell.prototype.reset = function(){\n\tthis.setValue(Cell.FREE_CELL_VALUE);\n    this._price = Cell.PRICE_X1;\n    this._type = Cell.TYPE_NORMAL;\n};\n\n/**\n * Tells whether the given cell is matched an equals to this one.\n * @param {Cell} cell\n * @return {Boolean}\n */\nCell.prototype.equals = function(cell){\n\tif(this.isType(Cell.TYPE_NORMAL) && cell.isType(Cell.TYPE_NORMAL)){\n\t\treturn this.getValue() === cell.getValue();\n\t}\n\treturn true;\n};\n\n/**\n * Swaps its internal values with given cell\n * @param {Cell} cell\n * @return {Boolean}\n */\nCell.prototype.swap = function(cell){\n\tif(this !== cell){\n        var tmpCell = Object.assign(new Cell(), cell);\n        cell.setValue(this.getValue());\n        cell._price = this._price;\n        cell._type = this._type;\n        this.setValue(tmpCell.getValue());\n        this._price = tmpCell._price;\n        this._type = tmpCell._type;\n    }\n\treturn true;\n};\n\nCell.prototype.clone = function(){\n\tvar result = new Cell();\n\tresult.setValue(this.getValue());\n\tresult._type = this._type;\n\tresult._price = this.getPrice();\n\treturn result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/Cell.js\n// module id = 0\n// module chunks = 0","'use strict';\n\nvar Cell = require(\"./core/Cell.js\");\nvar Board = require(\"./core/Board.js\");\nvar Observer = require(\"./core/Observer.js\");\nvar commonEventNames = require(\"./core/commonEventNames.js\");\n\nmodule.exports = BoardConsumer;\n\nfunction BoardConsumer(width, height){\n    this.__board = new Board(width, height);\n    this._observer = new Observer();\n}\n\n/**\n * Set value to even cell in board\n * @param maxValue {Number}\n * @private\n */\nBoardConsumer.prototype._generate = function(maxValue){\n    var i, count, cell;\n    count = this.__board.width * this.__board.height;\n    for(i = 0; i < count; ++i){\n        cell = this.__board.at(i);\n        cell.setValue(Math.floor(Math.random() * (maxValue + 1)));\n    }\n};\n\nBoardConsumer.prototype.subscribe = function(eventName, handler){\n    this._observer.subscribe(eventName, handler);\n};\n\nBoardConsumer.prototype.unsubscribe = function(eventName, handler){\n    this._observer.unsubscribe(eventName, handler);\n};\n\nBoardConsumer.prototype.at = function(index){\n    return this.__board.at(index);\n};\n\nBoardConsumer.prototype.xAtIndex = function(index){\n    return this.__board.xAtIndex(index);\n};\n\nBoardConsumer.prototype.yAtIndex = function(index){\n    return this.__board.yAtIndex(index);\n};\n\n/**\n * Send notify message with cell index and value\n * @param index\n */\nBoardConsumer.prototype.sendCellValue = function(index){\n    var cell = this.at(index);\n    if(cell){\n        this._observer.notify(commonEventNames.E_CELL_VALUE, {\"index\": index, \"value\": cell.getValue()});\n    }\n};\n\n/**\n * Send notify message with all cell index and value\n */\nBoardConsumer.prototype.sendCellsValue = function(){\n    var i, count;\n    count = this.__board.width * this.__board.height;\n    for(i = 0; i < count; ++i){\n        this.sendCellValue(i);\n    }\n};\n\n/**\n * Generate board and send notify with cell data\n * @param maxValue {Number} - maximum value for cell\n */\nBoardConsumer.prototype.generate = function(maxValue){\n    this._generate(maxValue);\n    this.sendCellsValue();\n};\n\n/**\n *\n * @param index {Number}\n * @returns {Array}\n */\nBoardConsumer.prototype.getMatchIndexes = function(index){\n    return this.__board.getMatchIndexes(index);\n};\n\n/**\n * Shift no empty cells to free cell\n */\nBoardConsumer.prototype.fall = function(){\n    var index, x, y, cell, topCell, falledIndex;\n    index = (this.__board.height * this.__board.width) - 1;\n    for(index; index >= 0; --index){\n        cell = this.__board.at(index);\n        if(cell.isFree()){\n            y = this.__board.yAtIndex(index); // y coord of current FREE cell\n            x = this.__board.xAtIndex(index); // x coord of current cell column\n            for(y - 1; y >= 0; --y){\n                // search first top no empty cell\n                falledIndex = this.__board.indexAtPosition(x, y);\n                topCell = this.__board.at(falledIndex); // get next top cell above current\n                if(!topCell.isFree()){\n                    // swap current cell with top cell\n                    if(cell.swap(topCell) === true){\n                        this._observer.notify(commonEventNames.E_FALL_CELL,\n                                             {\"currentIndex\": index, \"falledIndex\": falledIndex});\n                    }\n                    break;\n                }\n            }\n        }\n    }\n};\n\n/**\n * Set free value to even cell from indexList\n * @param indexList {Array}\n * @param [bonusCondition] {Boolean} - true for bonus, false for bad\n * @param [priceIncreasor] {Number}\n */\nBoardConsumer.prototype.destroyAtIndexes = function(indexList, bonusCondition, priceIncreasor){\n    var i, count, cell, index;\n    count = indexList.length;\n    for(i = 0; i < count; ++i){\n        index = indexList[i];\n        cell = this.__board.at(index);\n        // first index in indexList is index of selected cell by user\n        if(i === 0 && bonusCondition === true){\n            cell.transform(Cell.TYPE_EXTRA_BONUS); // convert selected cell to bonus type\n            cell.increasePrice(priceIncreasor);\n            this._observer.notify(commonEventNames.E_CELL_TO_BONUS, index);\n        } else if(i === 0 && bonusCondition === false){\n            cell.transform(Cell.TYPE_EXTRA_BAD); // convert selected cell to bad type\n            cell.increasePrice(priceIncreasor);\n            this._observer.notify(commonEventNames.E_CELL_TO_BAD, index);\n        } else {\n            cell.setValue(Cell.FREE_CELL_VALUE);\n            this._observer.notify(commonEventNames.E_CELL_TO_FREE, index);\n        }\n    }\n};\n\n/**\n * Compute total scope for cells by indexes in list\n * @param indexList {Array}\n * @returns {Number}\n */\nBoardConsumer.prototype.getReward = function(indexList){\n    var i, cellList, count, result;\n    cellList = [];\n    count = indexList.length;\n    for(i = 0; i < count; ++i){\n        cellList.push(this.at(indexList[i]));\n    }\n    result = Cell.computeScore(cellList);\n    return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/BoardConsumer.js\n// module id = 1\n// module chunks = 0","'use strict';\n\nvar config = require(\"../config/config.js\");\nvar BoardConsumer = require(\"./BoardConsumer.js\");\nvar Cell = require(\"./core/Cell.js\");\nvar commonEventNames = require(\"./core/commonEventNames.js\");\n\nclass Game extends Phaser.Scene {\n    constructor(){\n        super({key: \"Game\"});\n        this.group = null;\n        this.groupChildren = null;\n        this.boardConsumer = new BoardConsumer(config.width, config.height);\n\n        this.boardConsumer.subscribe(commonEventNames.E_CELL_VALUE, this._updateFrameValue.bind(this));\n        this.boardConsumer.subscribe(commonEventNames.E_CELL_TO_FREE, this._freeCell.bind(this));\n        this.boardConsumer.subscribe(commonEventNames.E_FALL_CELL, this._fallCell.bind(this));\n    }\n\n    preload(){\n        this.load.spritesheet(\"cat\", \"../assets/cat.png\", {frameWidth: 97, frameHeight: 59, endFrame: 5});\n    }\n\n    create(){\n        this.generateDefaultBoard();\n\n        this.boardConsumer.generate(5);\n\n\n        // ---------------------- test\n\n        this.boardConsumer.destroyAtIndexes([5, 6, 7, 8]);\n\n        this.boardConsumer.fall();\n\n        var self = this;\n        setTimeout(function(){\n            self.boardConsumer.destroyAtIndexes([10]);\n            self.boardConsumer.fall();\n        }, 1000);\n    }\n\n    _updateFrameValue(eventName, cellData){\n        var sprite = this.findChildByIndex(cellData.index);\n        if(sprite){\n            sprite.setFrame(cellData.value);\n        }\n    }\n\n    _freeCell(eventName, index){\n        var sprite = this.findChildByIndex(index);\n        if(sprite){\n            sprite.setVisible(false);\n        }\n    }\n\n    _fallCell(eventName, data){\n        var tween;\n        var cellIndex = this.findChildByIndex(data.currentIndex);\n        var falledCellIndex = this.findChildByIndex(data.falledIndex);\n        if(cellIndex !== null && falledCellIndex !== null){\n            falledCellIndex.initIndex = cellIndex.initIndex;\n            tween = this.tweens.add({\n                targets: falledCellIndex,\n                y: cellIndex.y,\n                duration: 500,\n                ease: \"Bounce\",\n                repeat: 0,\n                yoyo: false\n            }, this);\n        }\n    }\n\n    generateDefaultBoard(){\n        var i, y, count;\n        var frames = [];\n        var repeatCount = config.width - 1;\n        y = config.sprite.y;\n        for(i = 0; i < config.height; ++i){\n            frames.push({key: \"cat\", frame: 0, repeat: repeatCount,\n                         setXY: {x: config.sprite.x, y: y, stepX: config.sprite.xStep}});\n            y += config.sprite.yStep;\n        }\n\n        this.group = this.add.group(frames);\n        this.groupChildren = this.group.getChildren();\n\n        count = this.groupChildren.length;\n        for(i = 0; i < count; ++i){\n            this.groupChildren[i].initIndex = i;\n        }\n    }\n\n    findChildByIndex(index){\n        var i, currentChild;\n        var result = null;\n        var count = this.groupChildren.length;\n        for(i = 0; i < count; ++i){\n            currentChild = this.groupChildren[i];\n            if(currentChild.initIndex === index) {\n                result = currentChild;\n                break;\n            }\n        }\n        return result;\n    }\n}\n\nmodule.exports = Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Game.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nvar Cell = require(\"./Cell.js\");\n\nmodule.exports = Board;\n\n/**\n * @param {Number} width\n * @param {Number} height\n */\nfunction Board(width, height){\n\t/**\n\t * @property _data\n\t * @protected\n\t * @default []\n\t */\n\tthis._data = [];\n\n\t/**\n\t * @property width\n\t * @type {Number}\n\t */\n\tthis.width = width;\n\n\t/**\n\t * @property width\n\t * @type {Number}\n\t */\n\tthis.height = height;\n\n\tthis._createData();\n}\n\n/**\n * Full _data\n */\nBoard.prototype._createData = function(){\n    var i, count;\n    count = this.height * this.width;\n    for(i = 0; i < count; ++i){\n        this._data.push(new Cell());\n    }\n};\n\n/**\n * @param {Number} index\n * @return {Cell|null}\n */\nBoard.prototype.at = function(index){\n\tvar result = null;\n\tif(index >= 0 && index < this._data.length){\n\t\tresult = this._data[index];\n\t}\n\treturn result;\n};\n\n/**\n * @param {Number} x\n * @param {Number} y\n * @return {Number} computed index\n */\nBoard.prototype.indexAtPosition = function(x, y){\n\treturn x + this.width * y;\n};\n\n/**\n * @param {Number} index\n * @return {Number} x-coord from the index\n */\nBoard.prototype.xAtIndex = function(index){\n\treturn index % this.width;\n};\n\n/**\n * @param {Number} index\n * @return {Number} y-coord from the index\n */\nBoard.prototype.yAtIndex = function(index){\n\treturn Math.floor(index / this.width);\n};\n\n/**\n * @param {Number} index - index of the initial cell to match with it's neighbours\n * @return {Array} - list of matched indexes\n */\nBoard.prototype.getMatchIndexes = function(index){\n\tvar initialCell;\n\tvar matchingIndexes = [];\n\tvar visitedCellIndexes = {};\n\tinitialCell = this.at(index);\n\tif(initialCell){\n\t\tthis.__findEqualCells(index, initialCell.clone(), visitedCellIndexes, matchingIndexes);\n\t}\n\treturn matchingIndexes;\n};\n\n/**\n *\n * @param index {Number}\n * @param initialCell {Cell}\n * @param visitedCellIndexes {Object} - object which store indexes for check them on visiting\n * @param matchingIndexes {Array} - result indexes list\n * @returns {*}\n * @private\n */\nBoard.prototype.__findEqualCells = function(index, initialCell, visitedCellIndexes, matchingIndexes){\n\tvar x, y, nextIndex, nextCell;\n\tvisitedCellIndexes[index] = null; // save index in object with no matter value\n\tmatchingIndexes.push(index);\n\tx = this.xAtIndex(index);\n\ty = this.yAtIndex(index);\n\tif(y - 1 >= 0){\n\t\t// top\n\t\tnextIndex = this.indexAtPosition(x, y - 1);\n\t\t// get cell if it isn`t visited\n\t\tif(!(nextIndex in visitedCellIndexes)){\n\t\t\tnextCell = this.at(nextIndex);\n\t\t\tif(initialCell.equals(nextCell)){\n\t\t\t\tthis.__findEqualCells(nextIndex, initialCell, visitedCellIndexes, matchingIndexes);\n\t\t\t}\n\t\t}\n\t}\n\tif(x + 1 < this.width){\n\t\t//right\n\t\tnextIndex = this.indexAtPosition(x + 1, y);\n\t\t// get cell if it isn`t visited\n\t\tif(!(nextIndex in visitedCellIndexes)){\n\t\t\tnextCell = this.at(nextIndex);\n\t\t\tif(initialCell.equals(nextCell)){\n\t\t\t\tthis.__findEqualCells(nextIndex, initialCell, visitedCellIndexes, matchingIndexes);\n\t\t\t}\n\t\t}\n\t}\n\tif(y + 1 < this.height){\n\t\t// bottom\n\t\tnextIndex = this.indexAtPosition(x, y + 1);\n\t\t// get cell if it isn`t visited\n\t\tif(!(nextIndex in visitedCellIndexes)){\n\t\t\tnextCell = this.at(nextIndex);\n\t\t\tif(initialCell.equals(nextCell)){\n\t\t\t\tthis.__findEqualCells(nextIndex, initialCell, visitedCellIndexes, matchingIndexes);\n\t\t\t}\n\t\t}\n\t}\n\tif(x - 1 >= 0){\n\t\t// left\n\t\tnextIndex = this.indexAtPosition(x - 1, y);\n\t\t// get cell if it isn`t visited\n\t\tif(!(nextIndex in visitedCellIndexes)){\n\t\t\tnextCell = this.at(nextIndex);\n\t\t\tif(initialCell.equals(nextCell)){\n\t\t\t\tthis.__findEqualCells(nextIndex, initialCell, visitedCellIndexes, matchingIndexes);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Tells whether the board  has appropriate amount of nearly standing equal cells\n * @param {Number} minAmount - minium required amount of matched indexes\n * @return {Array} - list of matched indexes\n */\nBoard.prototype.findMatchIndexes = function(minAmount){\n    var index, currentCell, matchingIndexes;\n    var result = [];\n    var noMatchingIndexes = {}; // save all free indexes or indexes groups less than minAmount\n    for(index = 0; index < this._data.length; ++index){\n        matchingIndexes = [];\n        currentCell = this.at(index);\n        if(!currentCell.isFree() && !(index in noMatchingIndexes)){\n            this.__findEqualCells(index, currentCell.clone(), noMatchingIndexes, matchingIndexes);\n            if(matchingIndexes.length >= minAmount){\n                result = matchingIndexes;\n                break;\n            }\n        }\n    }\n    return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/Board.js\n// module id = 3\n// module chunks = 0","'use strict';\n\nmodule.exports = {\n    \"E_FALL_CELL\": \"E_FALL_CELL\",\n    \"E_CELL_TO_BAD\": \"E_CELL_TO_BAD\",\n    \"E_CELL_TO_FREE\": \"E_CELL_TO_FREE\",\n    \"E_CELL_TO_BONUS\": \"E_CELL_TO_BONUS\",\n    \"E_CELL_VALUE\": \"E_CELL_VALUE\"\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/commonEventNames.js\n// module id = 4\n// module chunks = 0","'use strict';\n\nvar Game = require(\"./Game.js\");\n\nvar config = {\n    type: Phaser.AUTO,\n    width: 400,\n    height: 500,\n    scene: [Game]\n};\n\nmodule.exports = new Phaser.Game(config);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/PhaserGame.js\n// module id = 5\n// module chunks = 0","'use strict';\n\nmodule.exports = {\n    width: 3,\n    height: 4,\n    sprite: {\n        x: 50,\n        xStep: 100,\n        y: 50,\n        yStep: 100\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./config/config.js\n// module id = 6\n// module chunks = 0","'use strict';\n\nvar __ = new WeakMap();\n\nmodule.exports = Observer;\n\n/**\n * Observable class. Allows to implement distributed event handling.\n *\n * @constructor\n * @class Observer\n */\nfunction Observer(){\n    __.set(this, {});\n}\n\nObject.defineProperties(Observer.prototype, {\n    /**\n     * @method subscribe\n     * @param event {String} (in) Name of event.\n     * @param method {Function} (in/out) The method to execute when event is fired.\n     * @return {Boolean} true in case of success operation.\n     */\n    \"subscribe\": {\n        \"enumerable\": true,\n        \"value\": function(event, method){\n            var list;\n            var eventBook = __.get(this);\n            if (typeof method === \"function\"){\n                if (event in eventBook){\n                    list = eventBook[event];\n                    if (-1 === list.indexOf(method)){ // prevent re-inserting\n                        list.push(method);\n                        return true;\n                    }\n                } else{\n                    eventBook[event] = [method];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n\n    /**\n     * @method unsubscribe\n     * @param event {String} (in) Name of event.\n     * @param method {Function} (in) Have to be same reference that passed in subscribe method.\n     * @return {Boolean} true in case of success operation.\n     */\n    \"unsubscribe\": {\n        \"enumerable\": true,\n        \"value\": function(event, method){\n            var list, index;\n            var eventBook = __.get(this);\n            if (event in eventBook){\n                list = eventBook[event];\n                index = list.indexOf(method);\n                if (-1 !== index){\n                    list.splice(index, 1);\n                    if (0 === list.length){\n                        delete eventBook[event]; // remove empty lists\n                    }\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n\n    /**\n     * @method notify\n     * @param event {String} (in) Name of event.\n     * @param data {*} (in/out) Data to deliver.\n     * @return {Boolean} true in case of success operation.\n     */\n    \"notify\": {\n        \"enumerable\": true,\n        \"value\": function(event, data){\n            var subscribers = __.get(this)[event];\n            if (subscribers){\n                _notify(subscribers, event, data);\n                return true;\n            }\n            return false;\n        }\n    },\n\n    /**\n     * @method hasSubscribersForEvent\n     * @param event {String} (in)\n     * @return {Boolean} whether observer has at least one subscriber for event\n     */\n    \"hasSubscribersForEvent\": {\n        \"enumerable\": true,\n        \"value\": function(event){\n            return event in __.get(this);\n        }\n    }\n});\n\n// Helpers:\n\nfunction _notify(list, event, data){\n    var i;\n    var length = list.length;\n    for (i = 0; i < length; ++i){\n        list[i](event, data); //callback\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/Observer.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nvar Game = require(\"./Game.js\");\nvar PhaserGame = require(\"./PhaserGame.js\");\nvar Cell = require(\"./core/Cell.js\");\nvar Board = require(\"./core/Board.js\");\nvar BoardConsumer = require(\"./BoardConsumer.js\");\n\nmodule.exports = {\n    \"Cell\": Cell,\n    \"Board\": Board,\n    \"BoardConsumer\": BoardConsumer,\n    \"Game\": Game,\n    \"PhaserGame\": PhaserGame\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}